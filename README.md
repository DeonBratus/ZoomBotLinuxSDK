# RecoZoomBot

## Установка Zoom SDK

Для установки библиотек Zoom SDK выполнить команду:

```bash
./utils/installers/install_zoom_sdk.sh
```

Если скрипт не сработал, выполнить следующие шаги вручную:

1. Скопировать папку **qt_libs** и файлы **\*.so** в директорию **rzbcpp/lib**.
2. В директории **rzbcpp/lib** создать символическую ссылку:

   ```bash
   ln -s libmeetingsdk.so libmeetingsdk.so.1
   ```

После этого библиотеки готовы к использованию.

## Установка зависимостей

### Установка пакетов для сборки

Установить необходимые пакеты для сборки:

```bash
sudo pacman -Sy pybind11 glib2
```

### Установка glib (пакет gl) для глобального окружения

```bash
sudo pacman -Sy python-gobject
```

### Установка glib (пакет gl) для локального виртуального окружения

```bash
pip install pygobject
```

### Установка переменной окружения

Убедиться, что путь к библиотекам указан в переменной окружения:

```bash
export LD_LIBRARY_PATH=/path/to/rzbcpp/lib:$LD_LIBRARY_PATH
```

## Запуск

### C++

Перед запуском необходимо вручную ввести токен, номер конференции и пароль от неё. Эти поля находятся в файле **main.cpp**.

Для генерации токена используется утилита **utils/token_generator**:

1. Вставить **api_key** и **api_secret** в файл **index.js**.
2. Запустить генерацию токена:

   ```bash
   node index.js
   ```

Для сборки и запуска проекта выполнить следующие команды:

```bash
cmake -B build
cd build/
make
./zoom_app
```

### Python

Для запуска через Python отредактировать файл **[rzbpy/test.py](rzbpy/test.py)**:

1. Вставить **api_key** и **api_secret** от Zoom App.
2. Указать ссылку на встречу в переменной **meeting_url**.

Пример:

```python
API_KEY = "your_api_key"
API_SECRET = "your_api_secret"

meeting_url = "ZOOM_LINK"
```

Запустить скрипт:

```bash
python rzbpy/test.py
```

Для базового тестирования можно использовать метод **run_with_cli()**, который автоматически запускает бота и подключает его к встрече.

## Управление ботом

После подключения к встрече бот запрашивает доступ к записи. После получения доступа начинается запись. Управление ботом осуществляется через команды в терминале:

- **join** — присоединиться к встрече.
- **leave** — выйти из встречи.
- **recoallow** — запросить доступ к записи.
- **recorun** — начать запись.
- **recostop** — остановить запись.
- **exit** — завершить работу бота.

Подробное описание команд находится в файле **BotRecording.cpp**.

---

**Примечание:** Для удобства рекомендуется использовать переменные окружения для хранения **api_key** и **api_secret**, но в текущей реализации они указаны напрямую в коде.